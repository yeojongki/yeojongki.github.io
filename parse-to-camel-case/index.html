<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>parse-to-camel-case</title>
  </head>
  <style>
    * {
      box-sizing: border-box;
    }

    h3,
    body,
    html {
      margin: 0;
    }

    body {
      padding: 20px;
      width: 600px;
    }

    main {
      position: relative;
    }

    textarea {
      width: 100%;
    }

    code {
      color: #299cff;
    }

    .text-center {
      text-align: center;
    }

    .btn {
      display: inline-block;
      margin-bottom: 0;
      font-weight: normal;
      text-align: center;
      vertical-align: middle;
      -ms-touch-action: manipulation;
      touch-action: manipulation;
      cursor: pointer;
      background-image: none;
      border: 1px solid transparent;
      white-space: nowrap;
      padding: 6px 12px;
      font-size: 12px;
      line-height: 1.42857143;
      border-radius: 4px;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .btn-primary {
      color: #fff;
      background-color: #337ab7;
      border-color: #2e6da4;
    }

    .btn-primary:focus,
    .btn-primary.focus {
      color: #fff;
      background-color: #286090;
      border-color: #122b40;
    }

    .btn-primary:hover {
      color: #fff;
      background-color: #286090;
      border-color: #204d74;
    }

    .form-control {
      display: block;
      width: 100%;
      /* height: 31px; */
      padding: 6px 12px;
      /* font-size: 12px; */
      line-height: 1.42857143;
      color: #555;
      background-color: #fff;
      background-image: none;
      border: 1px solid #ccc;
      border-radius: 4px;
      -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
      box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
      -webkit-transition: border-color ease-in-out 0.15s,
        -webkit-box-shadow ease-in-out 0.15s;
      -o-transition: border-color ease-in-out 0.15s,
        box-shadow ease-in-out 0.15s;
      transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
    }

    .form-control:focus {
      border-color: #66afe9;
      outline: 0;
      -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
        0 0 8px rgba(102, 175, 233, 0.6);
      box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),
        0 0 8px rgba(102, 175, 233, 0.6);
    }

    .reg-tips {
      color: darkgray;
      font-size: 14px;
    }

    .tips-copy-success {
      position: absolute;
      top: -100%;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      background: #fff;
      border-radius: 5px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: all 0.5s ease;
    }

    .tips-copy-success--show {
      top: 0;
      transition: all 0.5s ease;
    }
  </style>
  <body>
    <main>
      <div class="tips-copy-success text-center">å¤åˆ¶æˆåŠŸ âœ”ï¸</div>
      <h3>
        âœï¸ è½¬æ¢æ–‡æœ¬ä¸ºé©¼å³°å½¢å¼ï¼Œå½“å‰æ›¿æ¢çš„æ­£åˆ™è¡¨è¾¾å¼ä¸º
        <code id="regText">/\s(\w)/g</code>
      </h3>
      <p class="reg-tips">
        ğŸ”– 1. åœ¨åœ°å€æ è¾“å…¥å‚æ•° <code>?reg=xxx</code> å¯ä»¥æ›¿æ¢é»˜è®¤çš„æ­£åˆ™è¡¨è¾¾å¼
      </p>
      <p class="reg-tips">
        ğŸ”– 2. é»˜è®¤ä¸ºå…¨å±€åŒ¹é…, å¦‚éœ€ä¿®æ”¹åˆ™éœ€è¦å¦å¤–åŠ å…¥å‚æ•° <code>flags</code>, å¦‚
        <code>?flags=g</code>
      </p>
      <p class="reg-tips">
        ğŸ”– 3. é»˜è®¤ä¼šå°†å•è¯ä¸­çš„å•å¼•å·è½¬ä¸ºç©ºå­—ç¬¦ä¸² <code>(don't -> dont)</code>,
        å¦‚ä¸éœ€è¦å¯åœ¨åœ°å€æ ä¸­è¾“å…¥å‚æ•° <code>?singleQuote=1</code> æˆ–è€…ç®€å†™
        <code>?sq=1</code> å–æ¶ˆè¯¥è§„åˆ™
      </p>

      <textarea
        class="form-control"
        id="input"
        rows="5"
        placeholder="è¯·è¾“å…¥å¾…è½¬æ¢æ–‡æœ¬"
      ></textarea>

      <p class="text-center">â¬‡</p>

      <textarea
        class="form-control"
        id="output"
        rows="5"
        placeholder="è¿™é‡Œæ˜¯è½¬æ¢åçš„ç»“æœ"
      ></textarea>

      <p class="text-center">
        <button id="copy-input-btn" class="btn btn-primary">å¤åˆ¶è¾“å…¥</button>
        <button id="copy-output-btn" class="btn btn-primary">å¤åˆ¶ç»“æœ</button>
      </p>
    </main>
  </body>
  <script>
    const $ = (q) => document.querySelector(q)

    const seachQuery = new URLSearchParams(window.location.search)
    const urlReg = seachQuery.get('reg')
    const dontReplaceSingleQuote =
      seachQuery.get('singleQuote') || seachQuery.get('sq')
    const regFlags = seachQuery.get('flags') ?? 'g'
    const replaceReg = urlReg ? new RegExp(urlReg, regFlags) : /[\s_-](\w)/g

    window.onload = () => {
      $('#regText').innerText = replaceReg
      $('#copy-output-btn').addEventListener('click', copyOutputText)
      $('#copy-input-btn').addEventListener('click', copyInputText)
      $('#input').addEventListener('input', toCamelCase)
    }

    function copyText(inputEl) {
      inputEl.select() // é€‰ä¸­æ–‡æœ¬

      if (inputEl.value.trim()) {
        document.execCommand('copy') // æ‰§è¡Œæµè§ˆå™¨å¤åˆ¶å‘½ä»¤

        showSuccess()
      }
    }

    function copyInputText() {
      copyText($('#input'))
    }

    function copyOutputText() {
      copyText($('#output'))
    }

    function showSuccess() {
      $('.tips-copy-success').classList.add('tips-copy-success--show')
      setTimeout(() => {
        $('.tips-copy-success').classList.remove('tips-copy-success--show')
      }, 2000)
    }

    function toCamelCase() {
      const origin = $('#input').value.trim()

      // å°†ç¬¬ä¸€ä¸ªå­—æ¯è½¬å°å†™
      const lowerCaseFirst = (origin[0]?.toLowerCase() || '') + origin.substr(1)
      let result = lowerCaseFirst.replace(replaceReg, (_, $1) =>
        $1 ? $1.toUpperCase() : '',
      )

      if (!dontReplaceSingleQuote) {
        result = result.replace(/\'/g, '')
      }

      $('#output').value = result
    }
  </script>
</html>
